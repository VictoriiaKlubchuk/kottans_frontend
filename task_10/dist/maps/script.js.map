{"version":3,"sources":["script.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../js/script.js","sourcesContent":["'use strict';\r\nconst domElements = {\r\n  input: document.getElementById('userCity'),\r\n  submit: document.getElementById('submit'),\r\n  favorite: document.getElementById('favorite'),\r\n  today: document.getElementById('today'),\r\n  week: document.getElementById('week'),\r\n  wrapper: document.getElementsByClassName('wrapper')\r\n}\r\n\r\nconst api = {\r\n  apiUrl: 'https://api.weatherbit.io/v2.0/forecast/daily?city=',\r\n  apiKey: '&key=d838138fbd3449ffa742c37a9b3f480e',\r\n  days: '&days=7',\r\n  units: '&units=m'\r\n}\r\n\r\n// does render HTML for our responce\r\nfunction getWeather() {\r\n  let city = domElements.input.value;\r\n  weatherService(city, domElements.today)\r\n    .then( (json) => {\r\n      var data = json;\r\n      // print data to HTML\r\n\r\n      renderHTMLToday(domElements.today, data);\r\n      renderHTMLWeek(domElements.week, data);\r\n      domElements.wrapper[0].classList.add(\"active\");\r\n      console.log(data);\r\n    })\r\n}\r\n\r\n\r\n// send to server request, get response\r\nfunction weatherService(city) {\r\n  let cityName = city;\r\n  let fullUrl = api.apiUrl + cityName + api.apiKey + api.days;\r\n  let promise = fetch(fullUrl, {type:'cors'})\r\n    .then((response)=>{\r\n      return response.json();\r\n      }, (err)=> {\r\n        console.log(err);\r\n        throw err;\r\n    });\r\n  return promise; \r\n}\r\n\r\nvar weatherIcon = {\r\n  a01d: 'wi-day-fog'\r\n}\r\n\r\n// suported function for rendering  HTML and set it in function getWeather();\r\nfunction renderHTMLToday(elem, data) {\r\n  var avarageTemp = Math.round(data.data[0].temp);\r\n  var icon = data.data[0].weather.icon;\r\n  \r\n  var day = new Date(data.data[0].datetime);\r\n  var weekday = (function () {\r\n    var d = day.getDay();\r\n    var w = ['sunday', 'monday', 'tuesday', 'wednesday', 'thurtsday', 'friday', 'saturday'];\r\n    return w[d];\r\n  })();\r\n\r\n  elem.innerHTML = \r\n    `\r\n    <div class=\"today\">\r\n      <h1 class=\"title\">${ data.city_name }</h1>\r\n      <h2 class=\"day\">${ weekday }</h2> \r\n      <p><time>${ data.data[0].datetime }</time></p>\r\n      <img src=\"./img/${icon}.png\" alt=\"\">\r\n      <p> ${ avarageTemp } C&#176;</p>\r\n      <i class=\"wi wi-day-snow\"></i>\r\n      <p> wind speed: ${ data.data[0].wind_spd} m/s</p>\r\n    </div>\r\n    `\r\n}\r\n\r\n// suported function to do render HTML and set it in function getWeather();\r\nfunction renderHTMLWeek(elem, data) {\r\n  elem.innerHTML ='';\r\n  \r\n  for (var i = 1; i < 7; i++) {\r\n    var avarageTemp = Math.round(data.data[i].temp);\r\n    var day = new Date(data.data[i].datetime);\r\n    var weekday = (function () {\r\n      var d = day.getDay();\r\n      var w = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\r\n      return w[d];\r\n    })();\r\n    var icon = data.data[i].weather.icon;\r\n    console.log( i, icon);\r\n\r\n    elem.innerHTML +=\r\n    `\r\n    <div class=\"weekday\">\r\n      <h2 class=\"day\">${ weekday }</h2>\r\n      <img src=\"./img/${icon}.png\" alt=''>\r\n      <p>${ avarageTemp } C&#176;</p>\r\n      <p> wind ${ data.data[i].wind_spd} m/s</p>\r\n    </div>\r\n    `\r\n  }\r\n}\r\n\r\n// event listener for the form\r\ndomElements.submit.addEventListener('click', searchEvent);\r\ndomElements.favorite.addEventListener('click', showFavorite);\r\n\r\nfunction searchEvent(e){\r\n  e.preventDefault();\r\n  getWeather();//start our main function\r\n}\r\n\r\n// Next functions are in a progress and not finished\r\n// function for local storage\r\nvar storageValue = {};\r\nfunction showFavorite(e){\r\n  e.preventDefault();\r\n  getLocalStorage();\r\n  var city = domElements.input.value\r\n  storageValue[city] = city;\r\n  \r\n  setLocalStorage();\r\n  console.log('1', storageValue);\r\n}\r\n\r\nfunction setLocalStorage(){\r\n  try {\r\n    let city = domElements.input.value;\r\n    let cityLocalStorage = JSON.stringify(storageValue);\r\n    localStorage.setItem('favorite', cityLocalStorage);\r\n    console.log('2', cityLocalStorage);\r\n  } catch(e) {\r\n    console.log(e);\r\n  }\r\n}\r\n\r\nfunction getLocalStorage() {\r\n  try {\r\n    var fromLocalStorage = localStorage.getItem('favorite');\r\n    var fromCityLocalStorage = JSON.parse(fromLocalStorage);\r\n    // localStorage.clear();\r\n    console.log('3', fromCityLocalStorage);\r\n  } catch(e) {\r\n    console.log(e);\r\n  }\r\n}\r\n\r\n// history API\r\nfunction getHistory(){\r\n\r\n}\r\n"]}